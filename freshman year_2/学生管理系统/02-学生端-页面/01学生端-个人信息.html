<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生端-个人信息</title>
    <link rel="stylesheet" href="01-学生端-个人信息.css">
</head>

<body>
    <script src="学生端-个人信息.js"></script>
    <div class="container">
        <img src="https://zhangjiaxuan666.oss-cn-beijing.aliyuncs.com/FC07A847BE3E00205CE26DCDEE4257D5.jpg" alt=""
            class="main">
        <div class="left">
            <ul class="sidebar-menu">
                <li class="one" style="background-color: #8cd1fb;"><img
                        src="https://zhangjiaxuan666.oss-cn-beijing.aliyuncs.com/%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF.svg"
                        alt="membermessage" id="membermessage">个人信息</li>
            
                <li><a href="学生端-请假.html"><img src="https://zhangjiaxuan666.oss-cn-beijing.aliyuncs.com/%E8%AF%B7%E5%81%87.svg" alt="leave
                                        " id="leavebar">请假&emsp;&emsp;</a></li>
            
                <li><a href="学生端-查看任务.html"><img
                            src="https://zhangjiaxuan666.oss-cn-beijing.aliyuncs.com/%E6%9F%A5%E7%9C%8B%E4%BB%BB%E5%8A%A1.svg"
                            alt="test" id="test">查看任务</a></li>
            
                <li><a href="学生端-反馈意见.html"><img
                            src="https://zhangjiaxuan666.oss-cn-beijing.aliyuncs.com/%E5%8F%8D%E9%A6%88%E6%84%8F%E8%A7%81.svg"
                            alt="feedback" id="feedback.svg">反馈意见</a></li>
            </ul>
            <button id="logoutBtn">退出<img
                    src="https://zhangjiaxuan666.oss-cn-beijing.aliyuncs.com/%E9%80%80%E5%87%BA.svg" alt="signout"
                    id="signout"></button>
        </div>
        <div class="right">
            <div id="name" name="username" class="username">xxxxx</div>
            <div id="avatar" name="usernameAvatar" class="usernameAvatar"></div>
            <div class="box">
                <img src="https://zhangjiaxuan666.oss-cn-beijing.aliyuncs.com/%E5%AD%A6%E7%94%9F%E7%AB%AF-%E9%A1%B5%E9%9D%A2-%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF-%E6%81%A2%E5%A4%8D%E7%9A%84%E5%8F%B3666_01.jpg"
                    alt="">
                <div id="avatar" class="avatar">
                    <!-- <input type="file" id="avatar" accept="image/*" class="touxiang"> -->
                    <img id="avatar-preview"
                        src="https://zhangjiaxuan666.oss-cn-beijing.aliyuncs.com/%E5%A4%B4%E5%83%8F_03.jpg" alt="头像预览"
                        width="80">
                </div>
                <span type="text" id="name"  class="name">加载中</span>
                <span type="text" id="gender"  class="gender" >xx</span>
                <span type="text" id="college"  class="college" >xxxxx</span>
                <span type="text" id="direction"  class="direction" >xxxxx</span>
                <span type="text" id="phone" class="phone" >xxxxxxxxxxx</span>
            </div>
        </div>
    </div>
    <script>
        document.getElementById('logoutBtn').addEventListener('click', () => {
            if (confirm('确定要退出系统吗？')) {
                window.location.href = "../01-学生端-登录/学生端-登录.html"; 
            }
        });
     document.addEventListener('DOMContentLoaded', function () {
            const apiUrl = 'https://3cc5-2409-8a0c-264-6720-5149-9ef4-d932-4f5b.ngrok-free.app/stu/id';

            fetch(apiUrl, {
             method: 'GET', 
             headers: {
                 'Content-Type': 'application/json',   
              }
     })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    const nameElement = document.getElementById('name');
                    const genderElement = document.getElementById('gender');
                    const collegeElement = document.getElementById('college');
                    const directionElement = document.getElementById('direction');
                    const phoneElement = document.getElementById('phone');

                    if (nameElement) nameElement.textContent = data.name || '加载中';
                    if (genderElement) genderElement.textContent = data.gender || 'xx';
                    if (collegeElement) collegeElement.textContent = data.college || 'xxxxx';
                    if (directionElement) directionElement.textContent = data.direction || 'xxxxx';
                    if (phoneElement) phoneElement.textContent = data.phone || 'xxxxxxxxxxx';
                })
                .catch(error => {
                    console.error('There was a problem with the fetch operation:', error);
                    });
        });
    </script>
</body>

</html>